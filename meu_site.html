<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>Funny Clicker</title>
</head>
<body>
    <img src="assets\images\cookie.png" id="cookie" onclick="clickCookie()" class="cookie"></img>
    <span id="main_text" class="main_text">A Cookie has appeard, click it!</span>
    <span id="score" class="score">0</span>

    <script>
        let cookie = document.getElementById('cookie');
        let score_text = document.getElementById('score');

        let score = 0;

        let can_rotate = false;

        let rotation_angle = 0;

        //button.addEventListener("mouseenter")

        function clickCookie() {
            score++;
            score_text.textContent = score.toString();

            if (!cookie.classList.contains("cookie_clicked")) cookie.classList.add("cookie_clicked");
            if (cookie.classList.contains("cookie")) cookie.classList.remove("cookie");

            if (!can_rotate) can_rotate = true;

            setTimeout(function() {
                cookie.classList.remove("cookie_clicked");
            }, 400);
        }


        function rotateCookie() {
            if (can_rotate) {
                cookie.style.position = 'absolute';
                cookie.style.top = '20%';
                cookie.style.left = '35%';
                cookie.style.transform = 'rotate(' + rotation_angle + 'deg)';

                cookie.style.setProperty("--current-rotation", rotation_angle+"deg");
                
                rotation_angle += 0.01;
                if (rotation_angle > 360) rotation_angle = 0;
            }
        }

        var intervalId = window.setInterval(function(){
            rotateCookie();
        }, 10);   

    </script>
</body>
</html>